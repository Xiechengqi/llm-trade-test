(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,92821,e=>{"use strict";var l=e.i(29511),s=e.i(58138),t=e.i(67881),o=e.i(70065),a=e.i(34290);function r(){let[e,r]=(0,s.useState)(null),[n,i]=(0,s.useState)(!1);(0,s.useEffect)(()=>{if(window.matchMedia("(display-mode: standalone)").matches)return void console.log("[PWA] App is already installed");let e=e=>{console.log("[PWA] beforeinstallprompt event fired"),e.preventDefault(),r(e),i(!0)};return window.addEventListener("beforeinstallprompt",e),window.addEventListener("appinstalled",()=>{console.log("[PWA] App successfully installed"),i(!1),r(null)}),()=>{window.removeEventListener("beforeinstallprompt",e)}},[]);let c=async()=>{if(!e)return void console.log("[PWA] No deferred prompt available");try{await e.prompt();let{outcome:l}=await e.userChoice;console.log(`[PWA] User response: ${l}`),"accepted"===l?console.log("[PWA] User accepted the install prompt"):console.log("[PWA] User dismissed the install prompt")}catch(e){console.error("[PWA] Install prompt error:",e)}finally{r(null),i(!1)}};return n?(0,l.jsx)("div",{className:"fixed bottom-4 left-4 z-50 max-w-sm",children:(0,l.jsxs)(o.Card,{className:"shadow-lg",children:[(0,l.jsxs)(o.CardHeader,{className:"pb-3",children:[(0,l.jsxs)("div",{className:"flex items-start justify-between",children:[(0,l.jsx)(o.CardTitle,{className:"text-lg",children:"安装应用"}),(0,l.jsx)(t.Button,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>{i(!1)},children:(0,l.jsx)(a.X,{className:"h-4 w-4"})})]}),(0,l.jsx)(o.CardDescription,{children:"将此应用安装到您的设备，以便快速访问和离线使用"})]}),(0,l.jsx)(o.CardFooter,{className:"pt-0",children:(0,l.jsx)(t.Button,{onClick:c,className:"w-full",children:"立即安装"})})]})}):null}e.s(["PWAInstallPrompt",()=>r])}]);